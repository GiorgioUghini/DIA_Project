The next few slides focus on a context generation algorithm for the pricing when the budget allocated to each single sub-campaign is fixed. This means that we focus on trying to understand the different behaviors that the three class of users studied may follow. Since the three types of users are different by means of purchasing power, price discrimination may be important to further increase the reward instead of considering the users as a single class. Therefore, our goal is to understand whether or not it can be useful to divide the users in the various classes. The split condition is tested and eventually applied every week.
\subsubsection{Experiment settings}
The algorithm requires to define some inputs from which the context generation will begin. In particular is important to define:
\begin{itemize}
	\item \textbf{The number of arms:} As stated in the chapter before, the number of arms that have a reasonably fast convergence to the best arm and enough arms to pull a price that is close enough to the clairvoyant are 4,5,6 or 7. In this scenario, the algorithm uses 6 arms.
	\item \textbf{The number of clicks per day:} The more clicks per day on the ads, the more the algorithm will obtain a precise value, but the more it will require time to compute. We tried to choose a number as close as possible to what it could be a real number of users that click daily on ads like ours. We opted to 2000 clicks per day, and therefore whether or not it is convenient to split is checked every 14000 clicks.
	\item \textbf{The time span of the experiment:} It is considered a time span of 140 days, that means that the check on the split is performed for a total of 20 times.
\end{itemize}
Since the process involves some randomness and may require more than 140 days to converge, the splits can be done in different order and in different weeks, and the graphs shown as an output may differ. It is important to notice that since there are only 6 arms to explore, the splits always happen in the first weeks, while in a setting with more arms the splits can be performed later in time.
\subsubsection{The Algorithm}
A pseudo code that describes how the algorithm works is this:\\

\begin{algorithm}
	\caption{Context Generator Algorithm}
	\begin{algorithmic}[1]
		\renewcommand{\algorithmicrequire}{\textbf{Input:}}
		\REQUIRE $T$ : time span of the experiment, $C$ : number of clicks per day
		\FOR{$1 \leq t \leq T$}
		\FOR{$1 \leq c \leq C$}
		\FOR{$context \in Contexts$}
		\STATE $clairvoyant \gets ${ Update the clairvoyant value for the day}
		\FOR{$usert ype \in context$}
		\STATE $sort \gets ${ Sort if the user likes the price}
		\STATE $successes \gets ${ Update the number of successes for that user and context}
		\STATE $failures \gets ${ Update the number of failures for that user and context}
		\ENDFOR
		\STATE $reward \gets ${ Update the reward value for the day}
		\ENDFOR
		\STATE $rewards \gets ${ Append the reward value for the day}
		\STATE $clairvoyants \gets ${ Append the clairvoyant value for the day}
		\STATE $regrets \gets ${ Append the regret value for the day}
		\ENDFOR
		\IF{t mod 7 == 0} 
		\FOR{$context \in Contexts$}
		\FOR{$usert ype \in context$}
		\IF{split condition achieved}
		\STATE $c1, c2 \gets${ Perform the split}
		\ENDIF
		\ENDFOR
		\ENDFOR	
		\ENDIF
		\ENDFOR
	\end{algorithmic}
\end{algorithm}